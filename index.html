<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì§€ì›ì§€ë‹ˆ 2.0</title>
  <style>
    body {
      background: #f7f9fc;
      font-family: Arial, sans-serif;
      padding: 40px;
      text-align: center;
    }
    h1 { color: #222; }

    .container {
      max-width: 500px;
      margin: auto;
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0,0,0,0.1);
    }

    input, select {
      width: 100%;
      padding: 13px;
      margin: 8px 0;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #bbb;
    }

    button {
      width: 100%;
      padding: 13px;
      margin-top: 10px;
      background: #2b59ff;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    .result-box {
      margin-top: 25px;
      text-align: left;
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #ddd;
    }
  </style>
</head>
<body>

  <h1>ì§€ì›ì§€ë‹ˆ 2.0</h1>
  <div class="container">

    <!-- ğŸ” ê²€ìƒ‰ì–´ ì…ë ¥ -->
    <input id="searchInput" type="text" placeholder="ì˜ˆ: ì²­ë…„, ì™¸ì‹, ì„œìš¸" />

    <!-- ğŸ—‚ï¸ ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
    <select id="categorySelect">
      <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ (ì „ì²´)</option>
      <option value="ì²­ë…„">ì²­ë…„</option>
      <option value="í•œë¶€ëª¨">í•œë¶€ëª¨</option>
      <option value="ì†Œìƒê³µì¸">ì†Œìƒê³µì¸</option>
      <option value="ì¥ì• ì¸">ì¥ì• ì¸</option>
      <option value="ì˜ˆìˆ ">ì˜ˆìˆ Â·ë¬¸í™”</option>
      <option value="it">IT</option>
      <option value="ì™¸ì‹">ì™¸ì‹ì—…</option>
      <option value="ì·¨ì—…">ì·¨ì—…</option>
      <option value="ëŒ€í•™ìƒ">ëŒ€í•™ìƒ</option>
    </select>

    <button onclick="search()">ê²€ìƒ‰í•˜ê¸°</button>

    <div id="results"></div>
  </div>

<script>
  async function search() {
    const q = document.getElementById("searchInput").value.trim();
    const category = document.getElementById("categorySelect").value.trim();

    const url = `/api/search?q=${encodeURIComponent(q)}&category=${encodeURIComponent(category)}`;

    const res = await fetch(url);
    const data = await res.json();

    let html = `<div class='result-box'>ì´ ${data.count}ê±´ ê²€ìƒ‰ë¨<br><br>`;

    data.results.forEach(item => {
      html += `
        <b>${item.program_title}</b><br>
        ëŒ€ìƒ: ${item.target}<br>
        ì§€ì—­: ${item.region}<br>
        ë§ˆê°: ${item.deadline}<br>
        ì¹´í…Œê³ ë¦¬: ${item.category}<br>
        ë§í¬: <a href="${item.link}" target="_blank">ë°”ë¡œê°€ê¸°</a>
        <hr>
      `;
    });

    html += "</div>";
    document.getElementById("results").innerHTML = html;
  }
</script>

</body>
</html>
